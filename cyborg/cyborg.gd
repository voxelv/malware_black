extends Control

var display_name = ""

func set_color(color):
	$base.modulate = color

func add_part(part):
	var prev_part = null
	if has_part(part.type):
		prev_part = remove_part(part.type)
	$parts.add_child(part)
	return prev_part

func remove_part(part_type):
	var part = get_part(part_type)
	$parts.remove_child(part)
	return part

func has_part(part_type):
	var part = get_part(part_type)
	return part != null

func get_part(part_type):
	var part = null
	for c in $parts.get_children():
		if c.type == part_type:
			part = c
			break
	return part

func get_software(part_type):
	var part = get_part(part_type)
	return part.software

func set_software(type, version, major=null, minor=null, rev=null):
	var s = get_software(type)
	if version == null:
		s.set_version(major, minor, rev)
	else:
		s.set_version(version.major, version.minor, version.rev)

func get_software_str(part_type):
	var s = get_software(part_type)
	return s.get_str()